### 用户管理 ###

### 主从复制###
两台ubnutu

#### notice ####
- 无法远程连接mysql(报错111)：注释掉my.cnf中的bind-address或绑定本地ip
- 添加server-id and log_bin=
- 主从服务器检查show variables like 'server%'
- 主服务器
      GRANT REPLICATION SLAVE ON *.* TO 'slave_user'@'%' IDENTIFIED BY 'slave_password';
      FLUSH PRIVILEGES
      SHOW MASTER STATUS
- 从服务器
      CHANGE MASTER TO MASTER_HOST='202.167.45.10',MASTER_USER='slave_user', MASTER_PASSWORD='slave_password', MASTER_LOG_FILE='mysql-bin.000001', MASTER_LOG_POS=  107;
      START slave;
      show slave status\G;
- Slave_IO_Running = NO：stop slave; reset slave;start slave;

### 读写分离 ###
通过mysql-proxy调度：与主服务器在一台服务器上，用源代码安装含有lua脚本

    sudo apt-get install mysql-proxy


### Sqlite3 ###
- 连接：sqlite3
- 退出命令行：.exit

- 用户管理：
- 创建用户：    
        insert into mysql.user(Host,User,Password) values("localhost","test",password("1234"));

	- 添加权限：
        grant all privileges on testDB.* to test@localhost identified by '1234';
			grant select,update on testDB.* to test@"%" identified by '1234';
	- 删除用户：Delete FROM user Where User='test' and Host='localhost';
	- 修改密码：update mysql.user set password=password('新密码') where User="test" and Host="localhost";
	- 刷新系统权限：flush privileges;


### MySQL
- 关系型数据库概念与结构
- DBMS登录 退出
  mysql -h localhost  -H 3306 -u root -p
  exit;

- 数据库(DB)
  SHOW DATABASES:
  USE db_name;
  CREATE DATABASE [IF NOT EXISTS] db_name [CHARSET utf8(gbk)];
  ALTER DATABASE db_name DEFAULT  CHARACTER SET utf8
  DROP DATABASE [IF EXISTS] db_name;
  显示创建数据库时的语句:SHOW CREATE DATABASE db_name;
  ALTER DATABASE db_name DEFAULT  CHARACTER SET utf8

- 数据表
  SHOW TABLES;
  DROP TABLE [IF EXISTS] db_name;
  CREATE TABLE table_name(col_name  type  attribute , col_name  type  attribute,…… );

  create table news(
    id int NOT null AUTO_INCREMENT primary KEY,
    title varchar(100) not null,
    author varchar(20) not null,
    source varchar(30) not null,
    hits int(5) not null DEFAULT 0,
    context text null,
    adddate int(16) not null
    );

  修改表结构：

  显示表的结构定义:DESCRIBE table_name;
  查看创建表的语句:SHOW CREATE TABELE table_name;

- 数据类型
  整型：
    tinyint  0-255 或 -128~127      1个字节
    smallint  0-65535                2个字节
    mediumint 0-1670万				 3个字节
    int 0-21亿                 4个字节
    bigint 0-2^64-1				  8个字节

  浮点型(M代表总长度(不含小数点)，D代表小数位数)：
    float(M,D) (论上可以保留7位小数)    4个字节
    double(M,D) (理论上保留15位小数)      8个字节

  字符型：
    char(M)		固定长度     0-255个字符 char(11) //最多只能存储11个字节
    varchar(M) 自动伸缩型     0-65535个字符  M为字符个数，M为最大值

  文本型：
    text   中型文本型   0－1677个字符
    longtext  大型文本  0-42亿个字符

  日期时间(发布日期”这样的数据时，请用时间戳来存)：
    date 2015-10-20
    time 10:09:08
    datetime

- 字段属性
  NOT NULL | NULL，该列在添加数据时，是否可以为空。
  DEFAULT value，给该列定一个默认值。value的值只能是整型、字符型。
  DEFAULT 1  ，默认值为整型
  DEFAULT “男” ，默认值为字符型

  PRIMARY KEY，指定该列主键，值是唯一的，不能重复。
  AUTO_INCREMENT，指定列的值是自动增长型。
  注意：一个数据表，只能有一个主键和一个自动增长型。
  提示：数据表的id字段，必须要有 not null primary key auto_incremtn 这三个属性。

- 记录
  INSERT INTO table_name(字段1,字段2,字段3,…) VALUES(值1,值2,值3,…);
  DELETE FROM table_name [WHERE条件];
  修改：UPDATE table_name  SET 字段1 = 新值1 , 字段2 = 新值2  [WHERE条件]
  SELECT 字段列表|* FROM table_name [WHERE条件][ORDER BY排序(默认是按id升序排列)][LIMIT (startrow ,) pagesize]

  - where结构：＝　＜　＞　＜＝　＞＝　！＝　＜＞　is not null IS NULL bteween IN NOT IN LIKE('name%') NOT LIKE('name%')

  客户端向MySQL服务器端请求和返加的数据的字符集，在选择数据库后使用:set names gbk;
