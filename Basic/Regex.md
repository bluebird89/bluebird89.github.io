# 正则表达式 Regular Expression

由一类特殊字符以及文本字符所编写的模式，其中有些字符（元字符）不表示字符字母意义，而表示控制或通配的功能.

## shell

用man regex

### 字符匹配 Wildcards 通配符
- .：匹配任意单个字符
- [ ]：匹配指定范围内的任意单个字符([.]就是.)
- [ ^ ]：匹配指定范围外的任意单个字符
- [:alnum:]：字母和数字
- [:alpha:]：代表任何英文大小写字符，亦即 A-Z, a-z
- [:lower:]：小写字母 [:upper:] 大写字母
- [:blank:]：空白字符（空格和制表符）
- [:space:]：水平和垂直的空白字符（比[:blank:]包含的范围广）
- [:cntrl:]：不可打印的控制字符（退格、删除、警铃...） ）
- [:digit:]：十进制数字 [:xdigit:] 十六进制数字
- [:graph:]：可打印的非空白字符
- [:print:]：可打印字符
- [:punct:]：标点符号

### 匹配次数

匹配次数是用在要指定次数的字符后面，用于指定前面的字符要出现的次数。

- *：匹配前面的字符任意次，包括0次，贪婪模式：尽可能长的匹配
- .*：任意长度的任意字符
- \?：匹配其前面的字符0 或1次
- \+：匹配其前面的字符至少1次
- \{n\}：匹配前面的字符n次 次
- \{m,n\}：匹配前面的字符至少m 次，至多n次 次
- \{,n\}：匹配前面的字符至多n次
- \{n,\}：匹配前面的字符至少n次

### 位置锚定

位置锚定是用于定位出现的位置。

- ^：行首锚定，用于模式的最左侧
- $：行尾锚定，用于模式的最右侧
- ^PATTERN$：用于模式匹配整行
- ^$：空行
- ^[[:space:]]*$：空白行
- \< 或 \b：词首锚定，用于单词模式的左侧
- \> 或 \b：词尾锚定；用于单词模式的右侧
- \<PATTERN\>：匹配整个单词

## 分组

\(\)将一个或多个字符捆绑在一起，当作一个整体进行处理，如：\(root\)\+。分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些变量的命名方式为:\1, \2, \3, ...。\1表示从左侧起第一个左括号以及与之匹配右括号之间的模式所匹配到的字符。

示例：\(string1\+\(string2\)*\)；\1 ：string1\+\(string2\)*；\2 ：string2
后向引用：引用前面的分组括号中的模式所匹配字符 ， 而非模式本身。
\|：或者
示例：a\|b：a 或b；C\|cat： C 或cat ；\(C\|c\)at：Cat 或cat

## 实例

## JavaScript
- 校验密码强度:密码的强度必须是包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间。`^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$`
- 校验中文:`^[\\u4e00-\\u9fa5]{0,}$`
- 由数字、26个英文字母或下划线组成的字符串:`^\\w+$`
- 校验E-Mail 地址:`[\\w!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\\w](?:[\\w-]*[\\w])?\\.)+[\\w](?:[\\w-]*[\\w])?
- 校验身份证号码:
    - 15位：`^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$`
    - 18位：`^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$`
- 校验日期:“yyyy-mm-dd“ 格式的日期校验，已考虑平闰年。`^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$`
- 校验金额:金额校验，精确到2位小数。`^[0-9]+(.[0-9]{2})?$`
- 校验手机号:下面是国内 13、14、15、18开头的手机号正则表达式。^`(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$`
- 判断IE的版本：`^.*MSIE [5-8](?:\\.[0-9]+)?(?!.*Trident\\/[5-9]\\.0).*$`
- 校验IP-v4地址:`\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b`
- 校验IP-v6地址:`(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))`
- 检查URL的前缀

```
if (!s.match(/^[a-zA-Z]+:\\/\\//))
{
    s = 'http://' + s;
}
```
- 提取URL链接下面的这个表达式可以筛选出一段文本中的URL`^(f|ht){1}(tp|tps):\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- ./?%&=]*)?`
- 文件路径及扩展名校验:验证windows下文件路径和扩展名（下面的例子中为.txt文件）`^([a-zA-Z]\\:|\\\\)\\\\([^\\\\]+\\\\)*[^\\/:*?"<>|]+\\.txt(l)?$`
- 提取网页图片`\\< *[img][^\\\\>]*[src] *= *[\\"\\']{0,1}([^\\"\\'\\ >]*)`
- 提取页面超链接:`<a\\s*(?!.*\\brel=)[^>]*)(href="https?:\\/\\/)((?!(?:(?:www\\.)?'.implode('|(?:www\\.)?', $follow_list).'))[^"]+)"((?!.*\\brel=)[^>]*)(?:[^>]*)>`
- 查找CSS属性:`^\\s*[a-zA-Z\\-]+\\s*[:]{1}\\s[a-zA-Z0-9\\s.#]+[;]{1}`
- 抽取注释:`<!--(.*?)-->`
- 匹配HTML标签:`<\\/?\\w+((\\s+\\w+(\\s*=\\s*(?:".*?"|'.*?'|[\\^'">\\s]+))?)+\\s*|\\s*)\\/?>`

## 文件名通配符

```
ls -l l*
mv -v users-0* users-info/  # Option -v flag enables verbose output
ls l?st.sh  
ls l[abdcio]st.sh 
 ls ??st*
 ls [clst][io]?t*
 rm *tar*
 ls users-[0-9][a-zA-Z0-9][0-9]*
ls users-[0-9][!0-9][a-zA-Z]*
```
