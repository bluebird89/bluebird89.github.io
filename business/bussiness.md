# 业务

* 程序员的迷茫因为长期埋没于软件世界的浩大的分工体系中，无法看清从业务到软件架构的价值链条，无法清楚定位自己在分工体系的位置，处理不好自身与技术、业务的关系所致
* 仔细想想很多时候业务在脑海中存留的只是逻辑和流程，丢失的是对业务场景的感受，对用户痛点的体会，对业务发展的思考。这些都是与价值紧密相关的部分。很自然的用战术的勤快掩盖战略的懒惰！那么这样的后果就是把自己限死在流水线的工位上，阉割了自己能够发现业务价值的能力，而过多关注新技术对职场竞争力的价值。这也就是面对繁杂技术，而产生技术学习焦虑症的根本原因。
* 业务是主线.知识不是，是工具
* 中国科技企业重视商业模式创新，是因为中国的商业效率起点低，一经商业模式的创新改造，就能产生很大价值。而美国的商业效率本来就很高，只有基础科技代得以突破才能提高商业的效率
  - 移动支付在中国开疆辟土。而美国因为信用卡、个人信用制度的已经比较完善，全社会对移动支付并没有很大的兴趣
* 推送是不是好选择，商业上是，对个人不是

## 业务、技术与软件系统价值链

* 业务是指某种有目的的工作或工作项目，业务的目的就是解决人类社会与吃喝住行息息相关的领域问题，包括物质的需求和精神的需求，使开展业务活动的主体和受众都能得到利益。
* 通俗的讲业务就是用户的痛点，是业务提供方（比如公司）的盈利点。
* 技术则是解决问题的工具和手段。比如为了解决用户随时随地购物的业务问题时，程序员利用web技术构建电子商务App，而当需求升级为帮助用户快速选购商品时，程序员会利用数据算法等技术手段构建推荐引擎。
* 技术如果脱离了业务，那么技术应用就无法很好的落地，技术的研究也将失去场景和方向。而业务脱离了技术，那么业务的开展就变得极其昂贵和低效。
* 公司依靠软件系统提供业务服务而创造价值，程序员则是通过构建并持续演进软件系统服务能力以及业务功能以支撑公司业务发展从而创造价值。
* 业务领域与功能
* 服务能力
  - 系统正确性(程序能够正确表述业务流程，没有Bug)
  - 可用性（可以7＊24小时＊365不间歇工作）
  - 大规模（高并发，高吞吐量）
* 比如：他的工作是从事票务系统开发，他说自己在研究linux内核与汇编语言，我就问他linux内核和汇编语言的学习对你的工作产生了哪些帮助？能否举一个例子？他哑口无言，我内心就觉得这样一个热爱学习的好苗子正迷茫找不到重心，正在做一件浪费精力的事情。正确的学习方式应该是将学习与具体业务场景结合起来，和公司通过软件系统开展业务服务而创造价值，程序员通过提升软件系统服务能力创造价值这一链条串接起来，从对这些价值产生帮助的程度去思考优先级。学习本身没有错，错的往往就是那颗初心。再来看高并发分布式相关的知识，会发现并不是因为这些知识比较高深、比较时髦，很多公司有需求才值得学习，而是他们对价值链条有着实实在在的贡献

## 架构

软件架构就是将人员、技术等资源组织起来以解决业务问题，支撑业务增长的一种活动。可能比较抽象，我想我们可以从架构师的一些具体工作任务来理解这句话含义：

* 组织业务：架构师通过探索和研究业务领域的知识，构建自身看待业务的"世界观"。会基于这种认识拆分业务生命周期，确立业务边界，构建出了一套解决特定业务问题的领域模型，并且确认模型之间、领域之间的关系与协作方式，完成了对业务领域内的要素的组织工作。
* 组织技术：为了能在计算机世界中运作人类社会的业务模型，架构师需要选用计算机世界中合适的框架、中间件、编程语言、网络协议等技术工具依据之前设计方案组织起来形成一套软件系统方案，在我看来软件系统就像是一种技术组织，即技术组件、技术手段依据某种逻辑被组织起来了，这些技术工具被确定了职责，有了明确分工，并以实现业务功能为目标集合在了一起。比如RPC框架或消息队列被用于内部系统之间的通信服务就如同信使一般，而数据库则负责记录结果，它更像是一名书记员。
* 组织人员：为了能够实现利用软件系统解决业务问题的目标，架构师还需要关注软件系统的构建过程，他以实现软件系统为号召，从公司组织中聚集一批软件工程师，并将这些人员按不同工种、不同职责、不同系统进行组织，确定这些人员之间的协作方式，并关注这个组织系统是否运作良好比如沟通是否顺畅、产出是否达到要求、能否按时间完成等。
* 组织全局，对外输出：架构师的首要目标是解决业务问题，推动业务增长。所以他非常关心软件的运行状况。因为只有在软件系统运行起来后，才能对外提供服务，才能在用户访问的过程中，解决业务问题。架构师需要关注运行过程中产生的数据比如业务成功率，系统运行资源占用数据、用户反馈信息、业务增长情况等，这些信息将会帮助架构师制定下一步架构目标和方向。
* 所以软件架构不仅仅只是选用什么框架、选用什么技术组件这么简单。它贯穿了对人的组织、对技术的组织、对业务的组织，并将这三种组织以解决业务问题这一目标有机的结合在了一起。
* 软件系统的价值是以解决业务问题的能力、支撑业务增长的能力为衡量标准，所以最后生产出了很多对组织，对业务没有帮助的系统。软件系统只有在运行的时候才能创造价值。开发团队对生产环境的发布总是小心翼翼，对解决生产环境的问题总是加班加点。而软件系统的成本则体现在软件构建过程，这时候我们就能理解那些工程技术如项目管理、敏捷开发、单元测试、持续集成、持续构建，版本管理等的价值了，他们有的是保证软件系统正确性，有的是为了降低沟通成本，有的是为了提升开发效率等但总的来说就是为了降低软件的构建成本。所以在提升系统服务能力，创造更多业务收益的同时，降低构建成本也是一种提升收益的有效手段。
* 可以基于成本与收益的关系去思考自己每一项技能的价值，学习新的有价值的技能，甚至在工作中基于成本与收益的考量选择合适的技术。比如在逻辑不大发生变化的地方，没有必要去做过多的设计，应用各种花俏的设计模式等浪费时间。这样我们才能成为技术的主人。
* 架构目标需要适应业务的发展
  - 架构的目标就是为了支撑业务增长，就是提升软件系统的服务能力。可是话虽说如此，但真实却要做很多取舍。比如对初创团队而言，其产品是否解决业务问题这一设想还没得到确认，就立即去构造一个高性能、高可用的分布式系统，这样的架构目标远超出业务发展的需求，最后的结果就是浪费大量人力物力，却得不到任何起色。架构师需要审时度势，仔细衡量正确性、大规模、可用性三者的关系，比如今年业务蓬勃发展日均订单300万，基于对未来的可能预测，明年可能有3000万的订单，那么架构师应该要着重考虑大规模和可用性。而且每一点提升的程度，也需要架构师衡量把握，比如可用性要达到2个9还是3个9。
  - 回顾自己以往的工作很多时候就是**因为没有确立架构目标导致浪费了组织很多资源**，比如在之前的创业团队中，由于本人有一定的代码洁癖，经常会花费很多时间和同事计较代码质量，这样本可以更快上线的功能却需要被延迟，当时过度追求正确性的行为是与创业团队快速验证想法的业务需求不匹配的。
  - 另外一点比较深刻的案例则是在本人担任一个技术团队负责人的时候，在一次述职报告的时候，leader问我对接下来团队工作有什么计划？我当时说了一堆什么改进代码质量，每天晨会，任务透明化，建立迭代机制等等，然后就被各种批驳一通。当时团队基本以外包人员为主，人员水平较差，开发出来的金融系统也是千疮百孔而这条业务线最重要的业务价值则是按计划实现潜在投资方的需求，争取拉到投资。所以不久leader就召集测试架构的相关人员与我这边一同梳理对核心功能的测试工作，将研发、测试、上线的流程自动化。
  - 当时并不理解这样做核心价值是什么。但回过头来看这样的工作方式恰好符合了业务发展的需求，即确保系统是符合设计需求的，保证系统达到可接受的正确性，为后续能过快速前进打下基础，最重要的是为企业降低了构建成本。所以程序员想要工作出业绩，***必须认清楚系统背后的业务价值，按价值去梳理工作优先级，而不是像我一般过度纠结细节，追求技术理想化***

## 分工

* 分工是有其价值的，使得复杂昂贵的任务可以被简单、并行、可替换的流水线方式解决。
* 但久而久之，价值碎片化的问题就出现了，比如测试人员只关注找出更多问题，开发人员只关注快速开发更多的系统，运维人员只关注保障系统稳定。
* 三者之间常常都只站在自己的立场去要求对方怎么做，没有人再关注整体价值，产生诸多矛盾增加软件实施成本。
* 身处流水线中的一员，又因为困扰于重复性工作，迷茫于工作的意义，甚至感觉自己做为了人的创意与灵感都被扼杀了。所以朋友吐槽我说 你写了那么多代码然后并没有怎么样是非常有道理的，那是因为我只关注着做为流水工人的价值要求，看不到生态链最顶端的价值。
* 仔细想想那些团队领导，精英领袖哪一个不是为着更广大的价值所负责，比如项目经理只需要关心自身项目的商业价值，而公司CEO则关心公司范畴内所有业务的总体商业价值。所以关注的价值越大且职位也就越高。这些高层领导者们把控着整体的价值链条，及时纠正底层分工组织的价值目标与整体价值目标出现偏差的问题。

## 新思路

迷茫能引发思考，架构则塑造了视野，而价值则是我们之所以存活，之所以工作的逻辑起点。基于这样一种价值思维，对我们的学习和工作又可以有哪些改启示呢？

* 明确自身的业务相关主体：找出你工作的协作关系网内的业务方和客户方，这样你就可以从客户方中找到离你最近的业务价值点，从你的业务方中挖掘更多的资源。甚至你可以按这个思路顺着网络向上或向下挖掘价值链条，整合更多的上下游资源以实现更大的价值。
* 向前一步，为更大的价值负责：不要因为自己是开发人员就不去关注软件运维，不要因为只是测试就不关注软件开发，因为你关注的越多你越能看清全局的价值目标。如果只关注一亩三分地，那么注定这辈子只能困守在这一亩三分地里，成为一名流水线上焦虑至死的码农。试着转变思维，从架构师的角度思考价值问题，看看能否将技术贯穿到业务、到用户、到最终的价值去。之前我的朋友说过要把产品经理踢到运营位置去，把程序员踢到产品经理位置去，这样才是正确做事方式。这句话也是类似的意思，向前一步才能懂得怎么做的更好。
* 像架构师一样思考，用价值找寻重心：人的迷茫是因为找不到重心，而价值的意义在于引导我们思考做哪些事情才能实现价值，先做哪些事情会比后做哪些事情更能创造收益。像架构师那样全局性思考，把遇到问题进行拆分，把学习到的事物串联起来，努力构成完整的价值链条。
* 学会连接，构建体系：前几天看到一篇文章对今日头条的产品形态极尽批判之词，指责它的智能算法将人类封死在自己的喜好之中，将人类社会进一步碎片化。这似乎很有道理，有趣的是互联网将我们连接至广袤的世界，却也把我们封闭在独属于自己的小世界里。依旧是我的那位朋友，他说他的最大价值在于连接，将不同的人连接在一起，有趣的事情可能就会即将发生。
* 或许算法的天性就是顺从与迎合，但人最终想理解这个世界还是需要依靠自身的行动与不同人之间建立联系，这也是一种摆脱流水线限制的有效方式。另外，我们自身也是某种事物连接的产物，比如架构师，他是业务、技术、管理连接在一起的一种产物。所以我们应当树立自身的知识体系以吸收融合新知识，将孤立的概念连接起来，形成自身的价值链条。比如这篇文章将我从事技术开发经验、与对架构的理解以及自身过往经历结合起来，这也是一种内在的体系梳理。

## [多租户架构](https://blog.codonomics.com/2020/08/multi-tenant-architectures.html)

* 单独应用程序和单独数据库
  - 从开发和部署的角度来看，最容易实现。
  - 只需为每个租户自动化部署基础架构即可快速设置。
  - 从基础架构成本的角度来看，所有模型中最昂贵的。
  - 大规模部署相对较长的部署时间以用于更新的应用程序版本。
  - 从基础设施资源利用的角度来看，浪费更多。
  - 应用程序的可伸缩性无状态标准意味着：
    + 不保存用户请求数据
  - 适应性：
    + 这是启动SAAS平台的最佳方法，可用于产品市场，直至稳定和增长。
    + 当您提供SAAS作为白色标签的产品时。
    + 在客户端基础结构上部署SAAS产品时，可能出于合规性原因。
  - 挑战：
    + 您如何优化成本资源？
* 单独应用程序和共享数据库
  - 一种模型，其中特定于租户的配置与已部署的实例相关联，但是都共享一个公共数据库。每个客户端的数据隔离是通过在数据库模式之前添加租户信息来实现的。
  - 有许多Web框架和Web插件都支持这种带有租户特定数据的前缀查询模型，以找到正确的数据源。例如，apartment (rails/ruby), multi-tenant (laravel/php),springboot（java）等。
  - 关系数据库实例非常昂贵。它比您的应用程序实例价格更高，并且不如您的计算实例那么容易处理。您需要对容量规划进行一些前瞻性的展望。
  - 当您以SaaS提供者的身份管理数据库实例并希望在总体成本上进行优化时，最简单的操作通常是使用共享数据库。
  - 应用程序的可伸缩性无状态标准意味着：
    + 不保存用户请求数据
    + 不保留数据库响应
  - 挑战：
    + 随着交易量和数据量的增加，您如何管理？关系数据库凭借其优点是可以垂直伸缩的，而不能水平伸缩的。现在，这意味着随着您加入越来越多的租户，它可能会比您想象的更快成为瓶颈，具体取决于交易和数据量。
* 共享应用程序和单独数据库
  - 请求可以命中任何可用的应用程序实例。
  - 每个请求都会动态获取租户特定的配置。
  - 应用程序的可伸缩性无状态标准意味着：
    + 不保存用户请求数据
    + 不持有租户的配置
    + 不保留数据库响应
  - 挑战：
    + 如何在每个请求的基础上动态访问正确的数据库？您如何最佳地进行延迟？想想Atlassian的Confluence，Jira，Bitbucket等产品套件。
    + 如果SaaS应用程序在UI上提供了很多自定义功能，您如何最佳地获得针对租户的特定配置以获得延迟？Wix电子商务，Shopify等
* 共享应用程序和共享数据库
  - 所有多租户架构中最复杂的野兽。
  - 最大限度地利用红外线利用率，以实现最大的盈利能力。
  - 挑战：
    + 随着交易量和数据量的增加，您如何管理？关系数据库凭借其优点是可以垂直伸缩的，而不能水平伸缩的。现在，这意味着随着您加入越来越多的租户，它可能会比您想象的更快成为瓶颈，具体取决于交易和数据量。
    + 如果SaaS应用程序在UI上提供了许多自定义功能，那么您如何最佳地获得针对租户的特定配置以获得延迟？Wix电子商务，Shopify等

## To B

* 腾讯　企业发展事业群

## 垄断

## 产业

## 定价

* 富人20（早上送货上门），普通人10-15（自己到超市选购），穷人6元（晚上10点打折）。

## 图书

* 智能商业 曾鸣
  - “没有网络协同效应，单靠规模经济无法形成垄断。”
  - 阿里投资是为了支撑战略。我们需要打通数据，必须控股。” 流量越用越少，数据越用越多。
  - 淘宝天猫积累了大量的购买客单及快递地址数据，透视这些数据可以得到目标消费人群的聚居圈，然后找其中价格合适的场地。
  - 逻辑越极简，熟练应用越难。
  - 像王坚那样5年开山不到最后一刻不知生死的工程，腾讯的文化大概没人会做。
  - 公司发展有四种驱动：用户驱动、机会驱动、资源驱动、战略驱动。 因为要把握不同的驱动，所以每个公司，建设了不同的组织能力。
    + 没有用户驱动，所有靠机会崛起的企业，都是速生速死。
    + 国企都是资源驱动。但是如果整个组织的能力建设都是以资源为中心，那么洞察用户，和抓住机会的能力就一定弱。
* 《客户驱动的产品开发》
* 《数据驱动设计：A/B测试提升用户体验》
* 启示录 Marty Cagan

## 技术

* 博客
  - 用户
    + 注册 手机号 邮件 微信
    + 登陆 验证
  - 文章管理
    + markdown
    + 图片管理
* 电商
  - 支付
  - 账单
* 广告管理
  - 统计
* 在线聊天
  - 聊天记录 怎么存储
* 视频
  - 弹幕
* 帖子流
  - 关注
  - 列表
  - 点赞
  - 评论
* 搜索
* 音乐
* API文档

## 工具

* [metabase](https://github.com/metabase/metabase) The simplest, fastest way to get business intelligence and analytics to everyone in your company 😋 <https://metabase.com/>
* [Matomo](https://github.com/matomo-org/matomo):Liberating Web Analytics. Star us on Github? +1. Matomo is the leading open alternative to Google Analytics that gives you full control over your data. Matomo lets you easily collect data from websites, apps & the IoT and visualise this data and extract insights. Privacy is built-in. We love Pull Requests!https://matomo.org/

## 参考

* [技术变化那么快，程序员如何做到不被淘汰？](http://www.sohu.com/a/201528137_629652)
