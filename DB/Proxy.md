## 数据库中间件

在电商系统中，随着业务量的增大，读写 QPS 越来越高，单节点 MySQL 实例压力也变得越来越大，单纯的对服务器硬件升级已经无法满足生产环境的需要。对数据分片增加多个节点，降低单节点 MySQL 实例的压力成了必然选择。

## 工具

* [360 Atlas](link)
* [Mycat](link)
* [TDDL](link)
* [Vitess](link)
* [OneProxy](link)


## [Lede-Inc/Cetus](https://github.com/Lede-Inc/cetus)

专注于稳定、性能和分布式事务的MySQL数据库中间件
Cetus 主要的功能模块包括以下五个部分，分别是读写分离、分库、SQL 解析、连接池和管理功能。

Cetus 的整体工作流程分为:

* Cetus 读取启动配置文件和其他配置并启动，监听客户端请求；
* 收到客户端新建连接请求后，Cetus 经过用户鉴权和连接池，判断连接数是否达到上限，确定是否新建连接；
* 连接建立和认证通过后，Cetus 接收客户端发送来的 SQL 语句，并进行词法和语义分析，对 SQL 语句进行解析，分析 SQL 的请求类型，必要时改写 SQL，然后选取相应的 DB 并转发；
* 等待后端处理查询，接收处理查询结果集，进行合并和修改，然后转发给客户端；
* 如果收到客户端关闭连接的请求，Cetus 就会判断是否需要关闭后端连接，如果需要就关闭连接。
